%Knowledge Base

%Format of the facts
%laptop(model, price_range,os, daily_use, programming, gaming, designing,touch_screen, two_in_one, light_weight, long_battery_life, large_screen)


% Laptops under 150000
laptop('Lenovo Thinkpad t14s', range_1, windows, daily_use, programming, none, designing, touch_screen, none, light_weight, long_battery_life, none).
laptop('Acer Aspire 5', range_1, windows, daily_use, none, gaming, none, none, none, light_weight, none, large_screen).
laptop('Asus vivobook 15 A1504ZA', range_1, windows, daily_use, programming, gaming, none, none, none, light_weight, long_battery_life, large_screen).
laptop('Lenovo Ideapad 1 15AMN7', range_1, windows, daily_use, programming, none, none, none, none, light_weight, long_battery_life, large_screen).
laptop('Dell Vostro 3520', range_1, windows, daily_use, programming, gaming, none, none, none, light_weight, long_battery_life, none).
laptop('HP 250 G8', range_1, windows, daily_use, none, gaming, none, none, none, light_weight, none, none).
laptop('Dell Inspiron 3505', range_1, windows, daily_use, none, gaming, none, none, none, light_weight, none, large_screen).
laptop('Asus VivoBook 14', range_1, windows, daily_use, programming, none, designing, none, none, light_weight, none, none).
laptop('Acer Aspire 3', range_1, windows, daily_use, none, gaming, none, none, none, light_weight, none, large_screen).
laptop('Lenovo IdeaPad Slim 3', range_1, windows, daily_use, programming, none, designing, none, none, light_weight, long_battery_life, large_screen).

% Laptops under 300000
laptop('Lenovo Ideapad flex 5', range_2, windows, daily_use, programming, none, designing, touch_screen, two_in_one, light_weight, long_battery_life, large_screen).
laptop('Asus tuf gaming f15', range_2, windows, none, programming, gaming, none, none, none, none, none, large_screen).
laptop('Asus tuf a15', range_2, windows, none, programming, gaming, designing, none, none, none, none, large_screen).
laptop('Acer nitro v15', range_2, windows, none, none, gaming, designing, none, none, none, none, large_screen).
laptop('Hp notebook 15s', range_2, windows, daily_use, none, gaming, none, none, none, light_weight, long_battery_life, large_screen).
laptop('Msi thin gf63', range_2, windows, none, programming, gaming, designing, none, none, none, none, large_screen).
laptop('Dell inspiron 5620', range_2, windows, daily_use, programming, gaming, none, none, none, light_weight, long_battery_life, large_screen).
laptop('Asus zenbook 14 q410va', range_2, windows, daily_use, programming, gaming, designing, touch_screen, two_in_one, light_weight, long_battery_life, none).
laptop('Hp pavilion plus 14', range_2, windows, daily_use, programming, gaming, designing, none, none, light_weight, long_battery_life, none).
laptop('Macbook air m1', range_2, mac_os, daily_use, programming, none, designing, none, none, light_weight, none, none).

% Laptops under 400000
laptop('Hp victus gaming 15', range_3, windows, none, programming, gaming, none, none, none, none, long_battery_life, large_screen).
laptop('Hp probook 450 g10', range_3, windows, daily_use, programming, gaming, designing, none, none, light_weight, long_battery_life, none).
laptop('Asus zenbook 14x i7', range_3, windows, daily_use, programming, none, designing, touch_screen, two_in_one, light_weight, long_battery_life, none).
laptop('Asus zenbook 14 flip', range_3, windows, daily_use, none, none, designing, touch_screen, two_in_one, light_weight, long_battery_life, none).
laptop('Msi katana gf76', range_3, windows, none, none, gaming, none, none, none, none, long_battery_life, none).
laptop('Asus creator q540vj', range_3, windows, daily_use, programming, gaming, designing, none, none, light_weight, none, large_screen).
laptop('Dell xps 9310', range_3, windows, daily_use, programming, none, designing, none, none, light_weight, long_battery_life, large_screen).
laptop('Hp elitebook 840 g9', range_3, windows, daily_use, programming, none, designing, none, none, light_weight, long_battery_life, large_screen).
laptop('Dell g15', range_3, windows, none, programming, gaming, none, none, none, light_weight, none, large_screen).
laptop('Lenovo yoga slim 7 proX', range_3, windows, daily_use, programming, none, designing, touch_screen, none, light_weight, long_battery_life, large_screen).
laptop('Asus zephrus g14', range_3, windows, daily_use, programming, gaming, none, none, none, light_weight, none, none).
laptop('Lenovo legion slim 5', range_3, windows, none, programming, gaming, designing, none, none, light_weight, none, large_screen).
laptop('Macbook air m2', range_3, mac_os, daily_use, programming, none, designing, none, none, light_weight, none, none).
laptop('Macbook pro m1', range_3, mac_os, daily_use, programming, none, designing, none, none, light_weight, none, none).

% Laptops under 500000
laptop('Msi cyborg 15 a12vf', range_4, windows, none, none, gaming, none, none, none, none, none, large_screen).
laptop('Asus zenbook 14 ultra5', range_4, windows, daily_use, programming, none, designing, touch_screen, two_in_one, light_weight, long_battery_life, none).
laptop('Asus zenbook s13 i7', range_4, windows, daily_use, programming, none, designing, touch_screen, two_in_one, light_weight, long_battery_life, none).
laptop('Asus rog strix 15 g513', range_4, windows, none, programming, gaming, designing, none, none, none, none, large_screen).
laptop('Asus zepyrus g16', range_4, windows, none, programming, gaming, designing, none, none, light_weight, long_battery_life, large_screen).
laptop('Hp omen transcend 14', range_4, windows, none, programming, gaming, none, none, none, none, none, none).
laptop('Asus zepyrus g14 ryzen 9', range_4, windows, daily_use, programming, gaming, designing, none, none, light_weight, long_battery_life, none).
laptop('Macbook air m3', range_4, mac_os, daily_use, programming, none, designing, none, none, light_weight, none, none).
laptop('Macbook air 15', range_4, mac_os, daily_use, programming, none, designing, none, none, light_weight, none, none).
laptop('Macbook pro m2', range_4, mac_os, daily_use, programming, none, designing, none, none, light_weight, none, none).
laptop('Macbook pro m3', range_4, mac_os, daily_use, programming, none, designing, none, none, light_weight, none, none).

% Laptops over 500000
laptop('Lenovo yoga 9i 16', range_5, windows, daily_use, programming, none, designing, touch_screen, two_in_one, light_weight, long_battery_life, large_screen).
laptop('Asus zenbook pro 14 i9', range_5, windows, daily_use, programming, none, designing, touch_screen, two_in_one, light_weight, long_battery_life, none).
laptop('Lenovo legion slim 7i', range_5, windows, none, programming, gaming, designing, none, none, light_weight, long_battery_life, large_screen).
laptop('Hp spectre 14', range_5, windows, daily_use, programming, none, designing, touch_screen, two_in_one, light_weight, none, none).
laptop('Dell alienware m16 r2', range_5, windows, none, programming, gaming, none, none, none, none, long_battery_life, large_screen).
laptop('Asus zeprus g16 ultra 9', range_5, windows, none, programming, gaming, designing, none, none, light_weight, long_battery_life, large_screen).
laptop('Lenovo legion pro 7', range_5, windows, none, programming, gaming, none, none, none, light_weight, none, large_screen).
laptop('Dell alienware x16', range_5, windows, none, programming, gaming, none, none, none, none, none, large_screen).
laptop('Asus rog strix scar 16', range_5, windows, none, programming, gaming, none, none, none, none, none, large_screen).
laptop('Asus zenbook pro 16x oled', range_5, windows, daily_use, programming, gaming, designing, touch_screen, two_in_one, light_weight, long_battery_life, large_screen).
laptop('Macbook pro 16 m3 max', range_5, mac_os, daily_use, programming, none, designing, none, none, light_weight, none, large_screen).
laptop('Macbook pro 16 m3 pro', range_5, mac_os, daily_use, programming, none, designing, none, none, none, none, large_screen).
laptop('Macbook pro 14 m3 pro', range_5, mac_os, daily_use, programming, none, designing, none, none, none, none, none).
laptop('Macbook pro 14 m2 pro', range_5, mac_os, daily_use, programming, none, designing, none, none, light_weight, none, none).


%laptop details

%Format of the facts
%laptop_detail(name,price in lkr,ram,storage,processor,display,graphics_card,weight,screen_size)


% Laptops under 150000
laptop_detail('Lenovo Thinkpad t14s', 149000, 8, 256, 'Intel Core i5', '14 inch', 'Intel UHD Graphics', 1.27).
laptop_detail('Acer Aspire 5', 80000, 4, 128, 'Intel Core i3', '15.6 inch', 'Integrated Graphics', 1.8).
laptop_detail('Asus vivobook 15 A1504ZA', 135000, 8, 512, 'AMD Ryzen 5', '15.6 inch', 'Integrated Graphics', 1.7).
laptop_detail('Lenovo Ideapad 1 15AMN7', 95000, 4, 256, 'AMD A9', '15.6 inch', 'Integrated Graphics', 1.65).
laptop_detail('Dell Vostro 3520', 120000, 8, 512, 'Intel Core i5', '15.6 inch', 'Integrated Graphics', 1.66).
laptop_detail('HP 250 G8', 100000, 4, 256, 'Intel Core i3', '15.6 inch', 'Integrated Graphics', 1.74).
laptop_detail('Dell Inspiron 3505', 110000, 8, 256, 'AMD Ryzen 5', '15.6 inch', 'Integrated Graphics', 1.83).
laptop_detail('Asus VivoBook 14', 90000, 4, 256, 'AMD Ryzen 3', '14 inch', 'Integrated Graphics', 1.4).
laptop_detail('Acer Aspire 3', 85000, 4, 128, 'Intel Core i3', '15.6 inch', 'Integrated Graphics', 1.9).
laptop_detail('Lenovo IdeaPad Slim 3', 140000, 8, 512, 'AMD Ryzen 5', '15.6 inch', 'Integrated Graphics', 1.85).

% Laptops under 300000
laptop_detail('Lenovo Ideapad flex 5', 250000, 16, 512, 'AMD Ryzen 7', '14 inch', 'Integrated Graphics', 1.5).
laptop_detail('Asus tuf gaming f15', 280000, 16, 512, 'Intel Core i7', '15.6 inch', 'NVIDIA GeForce GTX 1650', 2.3).
laptop_detail('Asus tuf a15', 290000, 16, 1, 'AMD Ryzen 9', '15.6 inch', 'NVIDIA GeForce RTX 3070', 2.3).
laptop_detail('Acer nitro v15', 270000, 16, 512, 'Intel Core i7', '15.6 inch', 'NVIDIA GeForce GTX 1650', 2.2).
laptop_detail('Hp notebook 15s', 295000, 16, 512, 'Intel Core i7', '15.6 inch', 'Integrated Graphics', 1.69).
laptop_detail('Msi thin gf63', 295000, 16, 1, 'Intel Core i7', '15.6 inch', 'NVIDIA GeForce GTX 1650', 1.8).
laptop_detail('Dell inspiron 5620', 260000, 16, 512, 'Intel Core i7', '15.6 inch', 'Integrated Graphics', 1.6).
laptop_detail('Asus zenbook 14 q410va', 290000, 16, 512, 'Intel Core i7', '14 inch', 'Integrated Graphics', 1.3).
laptop_detail('Hp pavilion plus 14', 275000, 16, 512, 'Intel Core i7', '14 inch', 'Integrated Graphics', 1.41).
laptop_detail('Macbook air m1', 290000, 16, 512, 'Apple M1', '13.3 inch', 'Integrated Graphics', 1.29).

% Laptops under 400000
laptop_detail('Hp victus gaming 15', 380000, 16, 512, 'Intel Core i7', '15.6 inch', 'NVIDIA GeForce RTX 3050', 2.48).
laptop_detail('Hp probook 450 g10', 350000, 16, 512, 'Intel Core i7', '15.6 inch', 'Integrated Graphics', 1.74).
laptop_detail('Asus zenbook 14x i7', 390000, 16, 512, 'Intel Core i7', '14 inch', 'Integrated Graphics', 1.22).
laptop_detail('Asus zenbook 14 flip', 395000, 16, 1, 'Intel Core i7', '14 inch', 'Integrated Graphics', 1.4).
laptop_detail('Msi katana gf76', 360000, 16, 512, 'Intel Core i7', '17.3 inch', 'NVIDIA GeForce RTX 3060', 2.4).
laptop_detail('Asus creator q540vj', 365000, 16, 512, 'Intel Core i7', '15.6 inch', 'NVIDIA GeForce GTX 1050', 1.8).
laptop_detail('Dell xps 9310', 380000, 16, 512, 'Intel Core i7', '13.4 inch', 'Integrated Graphics', 1.32).
laptop_detail('Hp elitebook 840 g9', 395000, 16, 512, 'Intel Core i7', '14 inch', 'Integrated Graphics', 1.35).
laptop_detail('Dell g15', 375000, 16, 512, 'Intel Core i7', '15.6 inch', 'NVIDIA GeForce RTX 3060', 2.2).
laptop_detail('Lenovo yoga slim 7 proX', 399000, 16, 512, 'AMD Ryzen 7', '14 inch', 'Integrated Graphics', 1.32).
laptop_detail('Asus zephrus g14', 395000, 16, 1, 'AMD Ryzen 9', '14 inch', 'NVIDIA GeForce RTX 3060', 1.6).
laptop_detail('Macbook air m2', 390000, 16, 512, 'Apple M2', '13.3 inch', 'Integrated Graphics', 1.29).

% Laptops under 500000
laptop_detail('Msi cyborg 15 a12vf', 450000, 16, 512, 'Intel Core i7', '15.6 inch', 'NVIDIA GeForce RTX 3060', 2.25).
laptop_detail('Asus zenbook 14 ultra5', 480000, 16, 1, 'Intel Core i7', '14 inch', 'Integrated Graphics', 1.15).
laptop_detail('Asus zenbook s13 i7', 470000, 16, 512, 'Intel Core i7', '13.9 inch', 'Integrated Graphics', 1.1).
laptop_detail('Asus rog strix 15 g513', 490000, 16, 512, 'Intel Core i7', '15.6 inch', 'NVIDIA GeForce RTX 3070', 2.3).
laptop_detail('Asus zepyrus g16', 495000, 16, 1, 'AMD Ryzen 9', '16 inch', 'NVIDIA GeForce RTX 3080', 2.1).
laptop_detail('Hp omen transcend 14', 460000, 16, 512, 'Intel Core i7', '14 inch', 'Integrated Graphics', 1.8).
laptop_detail('Asus zepyrus g14 ryzen 9', 470000, 16, 512, 'AMD Ryzen 9', '14 inch', 'NVIDIA GeForce RTX 3060', 1.6).
laptop_detail('Macbook air m3', 490000, 16, 512, 'Apple M3', '13.3 inch', 'Integrated Graphics', 1.29).
laptop_detail('Macbook air 15', 480000, 16, 512, 'Apple M1', '15.6 inch', 'Integrated Graphics', 1.29).
laptop_detail('Macbook pro m2', 490000, 16, 512, 'Apple M2', '13.3 inch', 'Integrated Graphics', 1.29).
laptop_detail('Macbook pro m3', 500000, 16, 512, 'Apple M3', '13.3 inch', 'Integrated Graphics', 1.29).

% Laptops over 500000
laptop_detail('Lenovo yoga 9i 16', 550000, 16, 1, 'Intel Core i7', '16 inch', 'Integrated Graphics', 1.35).
laptop_detail('Asus zenbook pro 14 i9', 570000, 16, 1, 'Intel Core i9', '14 inch', 'NVIDIA GeForce GTX 1650', 1.6).
laptop_detail('Lenovo legion slim 7i', 590000, 16, 1, 'Intel Core i7', '15.6 inch', 'NVIDIA GeForce RTX 3060', 1.9).
laptop_detail('Hp spectre 14', 560000, 16, 512, 'Intel Core i7', '14 inch', 'Integrated Graphics', 1.29).
laptop_detail('Dell alienware m16 r2', 600000, 16, 1, 'Intel Core i7', '16 inch', 'NVIDIA GeForce RTX 3080', 2.3).
laptop_detail('Asus zeprus g16 ultra 9', 620000, 16, 1, 'AMD Ryzen 9', '16 inch', 'NVIDIA GeForce RTX 3080', 2.1).
laptop_detail('Lenovo legion pro 7', 580000, 16, 1, 'Intel Core i7', '15.6 inch', 'NVIDIA GeForce RTX 3060', 2.1).
laptop_detail('Dell alienware x16', 640000, 16, 1, 'Intel Core i7', '16 inch', 'NVIDIA GeForce RTX 3080', 2.6).
laptop_detail('Asus rog strix scar 16', 660000, 16, 1, 'Intel Core i7', '16 inch', 'NVIDIA GeForce RTX 3080', 2.3).
laptop_detail('Asus zenbook pro 16x oled', 680000, 16, 1, 'Intel Core i7', '16 inch', 'NVIDIA GeForce GTX 1650', 1.5).
laptop_detail('Macbook pro 16 m3 max', 700000, 16, 1, 'Apple M3', '16 inch', 'Integrated Graphics', 1.45).
laptop_detail('Macbook pro 16 m3 pro', 720000, 16, 1, 'Apple M3', '16 inch', 'Integrated Graphics', 1.45).
laptop_detail('Macbook pro 14 m3 pro', 650000, 16, 1, 'Apple M3', '14 inch', 'Integrated Graphics', 1.25).
laptop_detail('Macbook pro 14 m2 pro', 670000, 16, 1, 'Apple M2', '14 inch', 'Integrated Graphics', 1.25).

%budget ranges
budget_range(1,range_1). % LKR 0 - LKR 150000
budget_range(2,range_2). % LKR 150000 - LKR 300000
budget_range(3,range_3). % LKR 300000 - LKR 400000
budget_range(4,range_4). % LKR 400000 - LKR 500000
budget_range(5,range_5). % LKR 500000 and above

%laptop usage
laptop_usage(1,daily_use).
laptop_usage(2,programming).
laptop_usage(3,gaming).
laptop_usage(4,designing).


%Rules
find_mac(Budget, Usage,Details):-
    (Usage = daily_use -> 
        findall(Model, laptop(Model, Budget, mac_os, Usage, _, _, _, _, _, _, _, _), Models);
    Usage = programming -> 
        findall(Model, laptop(Model, Budget, mac_os, _, Usage, _, _, _, _, _, _, _), Models);
    Usage = gaming -> 
        findall(Model, laptop(Model, Budget, mac_os, _, _, Usage, _, _, _, _, _, _), Models);
    Usage = designing -> 
        findall(Model, laptop(Model, Budget, mac_os, _, _, _, Usage, _, _, _, _, _), Models)
    ),
    
    print_rec_laptops(Models,Details).


find_windows(Budget, Usage, Touch, Two_in_one, Light_weight, Long_battery_life, Screen_size,Details):-
    (Touch = none -> TouchValue = _ ; TouchValue = Touch),
    (Two_in_one = none -> Two_in_oneValue = _ ; Two_in_oneValue = Two_in_one),
    (Light_weight = none -> Light_weightValue = _ ; Light_weightValue = Light_weight),
    (Long_battery_life = none -> Long_battery_lifeValue = _ ; Long_battery_lifeValue = Long_battery_life),
    (Screen_size = none -> Screen_sizeValue = _ ; Screen_sizeValue = Screen_size),

    (Usage = daily_use -> 
        findall(Model, laptop(Model, Budget, windows, Usage, _, _, _, TouchValue, Two_in_oneValue, Light_weightValue, Long_battery_lifeValue, Screen_sizeValue), Models);
    Usage = programming ->
        findall(Model, laptop(Model, Budget, windows, _, Usage, _, _, TouchValue, Two_in_oneValue, Light_weightValue, Long_battery_lifeValue, Screen_sizeValue), Models);
    Usage = gaming ->
        findall(Model, laptop(Model, Budget, windows, _, _, Usage, _, TouchValue, Two_in_oneValue, Light_weightValue, Long_battery_lifeValue, Screen_sizeValue), Models);
    Usage = designing ->
        findall(Model, laptop(Model, Budget, windows, _, _, _, Usage, TouchValue, Two_in_oneValue, Light_weightValue, Long_battery_lifeValue, Screen_sizeValue), Models)
    ),
    
    print_rec_laptops(Models,Details).


print_rec_laptops(L, Details) :-
    (   L = [] -> 
        Details = []
    ;   findall(
            json{
                model: Model,
                price: Price,
                ram: RAM,
                storage: Storage,
                processor: Processor,
                display: Display,
                graphics: Graphics,
                weight: Weight
            },
            (
                member(Model, L),
                laptop_detail(Model, Price, RAM, Storage, Processor, Display, Graphics, Weight)
            ),
            Details
        )
    ).

% Explanation predicates for each specification
explain_price(range_1, 'Budget-friendly option under LKR 300,000.').
explain_price(range_2, 'Budget-friendly option under LKR 300,000.').
explain_price(range_3, 'Mid-range laptop with good value for money.').
explain_price(range_4, 'Mid-range laptop with good value for money.').
explain_price(_, 'Premium laptop with high-end specifications.').

explain_ram(RAM, RAMExp) :-
    (RAM >= 16 ->
        RAMExp = '- 16GB RAM excellent for multitasking and demanding applications'
    ; RAM >= 8 ->
        RAMExp = '- 8GB RAM suitable for everyday computing tasks'
    ;
        RAMExp = '- Basic RAM configuration for light usage'
    ).

explain_storage(Storage, StorageExp) :-
    (Storage >= 1 ->
        StorageExp = '- Large storage capacity of 1TB or more'
    ; Storage >= 512 ->
        StorageExp = '- Decent 512GB storage for most users'
    ;
        StorageExp = '- Basic storage configuration'
    ).

explain_processor(Processor, ProcessorExp) :-
    (sub_string(Processor, _, _, _, 'i9') ->
        ProcessorExp = '- High-performance Intel Core i9 processor for intensive workloads'
    ; sub_string(Processor, _, _, _, 'i7') ->
        ProcessorExp = '- Powerful Intel Core i7 processor for demanding tasks'
    ; sub_string(Processor, _, _, _, 'M3') ->
        ProcessorExp = '- Latest Apple M3 chip offering excellent performance'
    ;
        ProcessorExp = '- Capable processor for general computing'
    ).

explain_display(Display, DisplayExp) :-
    (sub_string(Display, _, _, _, '16 inch') ->
        DisplayExp = '- Large 16-inch display ideal for productivity and entertainment'
    ; sub_string(Display, _, _, _, '15.6 inch') ->
        DisplayExp = '- Standard 15.6-inch display good for most uses'
    ; sub_string(Display, _, _, _, '14 inch') ->
        DisplayExp = '- Compact 14-inch display balancing portability and usability'
    ;
        DisplayExp = '- Display suitable for general use'
    ).

explain_graphics(Graphics, GraphicsExp) :-
    (sub_string(Graphics, _, _, _, 'RTX 3080') ->
        GraphicsExp = '- High-end RTX 3080 GPU for gaming and professional work'
    ; sub_string(Graphics, _, _, _, 'RTX 3060') ->
        GraphicsExp = '- Capable RTX 3060 GPU for gaming and content creation'
    ; sub_string(Graphics, _, _, _, 'GTX 1650') ->
        GraphicsExp = '- Entry-level dedicated GPU for basic graphics tasks'
    ; sub_string(Graphics, _, _, _, 'Integrated') ->
        GraphicsExp = '- Integrated graphics sufficient for everyday computing'
    ).

explain_weight(Weight, WeightExp) :-
    (Weight =< 1.3 ->
        WeightExp = '- Ultra-portable design under 1.3kg'
    ; Weight =< 1.8 ->
        WeightExp = '- Lightweight and portable under 1.8kg'
    ; Weight =< 2.2 ->
        WeightExp = '- Standard weight suitable for occasional transport'
    ;
        WeightExp = '- Desktop replacement with powerful components'
    ).